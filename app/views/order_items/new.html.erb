<div class="row">
<h1>注文情報確認</h1>
<div class="col col-xs-8">
<table>
	<thead>
		<tr>
			<th>商品名</th>
			<th>単価（税込）</th>
			<th>数量</th>
			<th>小計</th>
		</tr>
	</thead>
	<tbody>
		<!-- sum=0をeach内部に入れるとバグる -->
		<%= form_with model: OrderItems, url:{controller: 'order_items', action: 'create'} do |f| %>
		<%= f.submit "カートに入れる", class: "btn btn-primary" %>
		<% sum = 0 %>
			<% @cart_items.each do |cart_item| %>
 				<tr>
 					<th><%= cart_item.product.name %></th>
					<th><%= cart_item.product.price %>円</th>
					<!-- hidden_fieldで値を格納 -->
					<%= f.hidden_field :order_price, value: cart_item.product.price  %>
					<th><%= cart_item.quantity %></th>
					<!-- hidden_fieldで値を格納 -->
					<%= f.hidden_field :quantity, value: cart_item.quantity  %>
					<th><%= sub_total = cart_item.product.price * cart_item.quantity %>円</th>
					<% sum = sum + sub_total %>
					</th>
				</tr>
			<% end %>
	</tbody>
</table>
</div>

<div class="col col-xs-4">
<table>
	<thead>
		<tr>
			<th>送料</th>
			<th>商品合計</th>
			<th>請求金額</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><%= fee = 800 %>円</td>
			<td><%= sum %>円</td>
			<td><%= sum = sum + fee %>円</td>
		</tr>
	</tbody>
</table>
</div>
</div>

<div class="row">
	<h2>支払方法</h2>
	<%#= @order.how_to_pay %>
	<h2>お届け先</h2>
	<%#= @order.send_to_address %>
</div>
 <!-- hidden_fieldでユーザーIDとオーダーID -->
<%#= f.hidden_field :customer_id, value: current_customer.id  %>
<%#= f.hidden_field :order_id, value: order.id  %>
<%= f.submit "購入を確定する", class: "btn btn-sm btn-success" %>
<% end %>